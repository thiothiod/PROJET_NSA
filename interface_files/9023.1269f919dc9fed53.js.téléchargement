!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="450f82db-9ee4-4f75-a303-95311a41e8e0",e._sentryDebugIdIdentifier="sentry-dbid-450f82db-9ee4-4f75-a303-95311a41e8e0")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9023],{70935:function(e,t,n){"use strict";n.d(t,{Q:function(){return r}});let r=(0,n(52983).createContext)(null)},43595:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var r=n(97458),l=n(16103),i=n(52983),s=n(70935);let a=e=>{let{children:t,thumbnailHeight:n}=e,[a,o]=(0,i.useState)(!1),c=(0,l.H)(),u=(0,i.useCallback)(()=>{c||n<90||o(!0)},[c,n]),d=(0,i.useCallback)(()=>{o(!1)},[]),f=(0,i.useMemo)(()=>({attributionEnabled:a,showAttribution:u,hideAttribution:d,thumbnailHeight:n}),[a,d,u,n]);return(0,i.useEffect)(()=>{a&&setTimeout(()=>{d()},15e3)},[a,d]),(0,r.jsx)(s.Q.Provider,{value:f,children:t})}},31468:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(71409),l=n(86686);let i=async(e,t)=>(0,l.c)("/api/user/files/open?reference=".concat(e),"GET",void 0,{locale:t}),s=e=>{let{locale:t}=(0,r.Vx)();return{openFile:async()=>{let n=await i(e,t);return n.success&&window.location.assign(n.data.url),!1}}}},49023:function(e,t,n){"use strict";n.r(t),n.d(t,{FileThumbnail:function(){return ey}});var r=n(97458),l=n(66287),i=n(71409),s=n(8156),a=n(71163),o=n(52983),c=n(17187),u=n(90783);let d=(e,t)=>{let n=new Date,r=new Date(e),l=(n.getTime()-r.getTime())/1e3;if(l<60)return{text:"now"};if(l<3600){let e=Math.floor(l/60);return 1===e?{text:"minuteAgo"}:{text:"minutesAgo",number:e}}if(l<86400){let e=Math.floor(l/3600);return 1===e?{text:"hourAgo"}:{text:"hoursAgo",number:e}}if(l<172800)return{text:"yesterday"};if(l<604800)return{text:"daysAgo",number:Math.floor(l/86400)};if(l<1209600)return{text:"lastWeek"};if(l<2592e3)return{text:"weeksAgo",number:Math.floor(l/604800)};let i=r.getDate(),s=r.toLocaleString(t,{month:"long"}),a=r.getFullYear();return{raw:"".concat(s," ").concat(i,", ").concat(a)}},f=(0,o.createContext)({});var m=n(25288),h=n(52404),v=n(30975),x=n(78390),y=n(31375),p=n(65841),g=n(9826),j=n(71052),w=n(7616),b=n(98145),k=n(90524);let C=()=>{let{locale:e}=(0,i.Vx)(),[,t]=(0,w.KO)(k.M);return{refetchFiles:(0,o.useCallback)(async()=>{let n=await (0,b.v)({locale:e});n.success&&t(n.data)},[e,t])}},$=(e,t)=>{let n=(0,o.useRef)(null),[r,l]=(0,o.useState)(!1),[s,c]=(0,o.useState)(!1),{createQueryKey:u}=(0,y.K)(),{refetchFiles:d}=C(),{openToast:f}=(0,h.x_)(),{t:w}=(0,a.$G)("error"),b=(0,i.Vx)().locale,k=(0,g.Z)(),{setIsBlockedMultiSelect:$}=(0,p.q)(),T=(0,m.NL)(),{folderReferenceWorkspace:N,isRootFolder:D}=(0,x.I)(),{isTrash:M}=(0,v.G)();(0,o.useEffect)(()=>{r&&n.current&&setTimeout(()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.focus()},0)},[r]);let F=(0,o.useCallback)(async()=>{if(s||!n.current)return;t||k("renameProjects");let r=n.current.value.trim();0!==r.length&&(c(!0),(await (0,j.O)({name:r,reference:e,folderReference:t?null:N,locale:b})).success?(t&&d(),T.setQueryData(u("files",N),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return{...t,files:t.files.map(t=>t.reference===e?{...t,name:r}:t)}})):f({type:"danger",message:w("unknown")}),c(!1),l(!1),$(!1))},[s,k,e,N,b,$,t,T,u,d,f,w]);return{inputRef:n,isRenaming:r,renameFile:F,activateRename:(0,o.useCallback)(()=>{M||D||(l(!0),$(!0))},[D,M,$])}};var T=n(43906),N=n(47276),D=n(50887),M=n(3862),F=n(63860),I=n(97014),R=n(3239),S=n(50273),_=n(71059),E=n(13061),P=n(82747),J=n(29608),A=n(50977);let Z=()=>(0,o.useContext)(f);var G=n(73174),O=n(4354),Q=n(86686);let V=async e=>(0,Q.c)("/api/user/files?reference=".concat(e),"DELETE");var H=n(83648),K=n(1515),L=n(23160);let U=async e=>(0,Q.c)("/api/user/files/restore".concat((0,L.T)({reference:e})),"POST"),q="/user/projects",B=e=>{let{createQueryKeyTrash:t,createQueryKey:n}=(0,y.K)(),{folderReferenceWorkspace:l}=(0,x.I)(),{openToast:i}=(0,h.x_)(),{pathname:s,push:c}=(0,H.useRouter)(),u=(0,m.NL)(),{setIsTrash:d}=(0,v.G)(),f=(0,o.useCallback)(e=>{e.preventDefault(),s===q?d(!1):c(q)},[s,c,d]);return{restoreFile:(0,o.useCallback)(async()=>{try{var s,o;let c=await U(e),d=null!==(o=u.getQueryData(t("files")))&&void 0!==o?o:{files:[]},m=null==d?void 0:null===(s=d.files)||void 0===s?void 0:s.find(t=>t.reference===e);if(!c.success)throw Error("Restore request failed");return u.setQueryData(t("files"),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return{...t,files:t.files.filter(t=>t.reference!==e)}}),u.setQueryData(n("files",l),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return m?{...e,files:[...e.files,m]}:e}),i({type:"success",title:"",message:(0,r.jsx)(a.cC,{i18nKey:"projects:toast.restore",values:{type:"file"},components:{1:(0,r.jsx)(K.P,{onClick:f})}}),duration:4e3}),!0}catch(e){return!1}},[e,u,t,n,l,i,f])}},W=(e,t)=>{let{createQueryKey:n,createQueryKeyTrash:r}=(0,y.K)(),l=(0,m.NL)(),i=(0,o.useRef)([]),{restoreFile:s}=B(e),{folderReferenceWorkspace:c}=(0,x.I)(),u=n("files",c),d=r("files"),{refetchFiles:f}=C(),{openToast:v}=(0,h.x_)(),{t:p}=(0,a.$G)(["error","projects"]);return{deleteFile:async()=>{try{if(i.current=[],!(await V(e)).success)throw Error("Delete request failed");return t&&f(),l.setQueryData(u,function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]},n=t.files.filter(t=>t.reference!==e||(i.current.push(t),!1));return{...t,files:n}}),l.setQueryData(d,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return{...e,files:[...e.files,...i.current]}}),!0}catch(e){return v({type:"danger",message:p("error:unknown")}),!1}},undoDeleteFile:async()=>{try{if(!await s())throw Error("Restore request failed");return t&&f(),l.setQueryData(d,function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return{...t,files:t.files.filter(t=>t.reference!==e)}}),l.setQueryData(u,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{files:[]};return{...e,files:[...e.files,...i.current]}}),i.current=[],!0}catch(e){return v({type:"danger",message:p("error:unknown")}),!1}}}},Y=async(e,t)=>(0,Q.c)("/api/user/files/download?reference=".concat(e),"GET",void 0,{locale:t}),z=e=>{let{locale:t}=(0,i.Vx)();return{donwloadFile:async()=>{let n=await Y(e,t);return n.success&&window.location.assign(n.data.url),!1}}},X=async(e,t)=>(0,Q.c)("/api/user/files/edit?reference=".concat(e),"GET",void 0,{locale:t}),ee=e=>{let{locale:t}=(0,i.Vx)();return{editFile:async()=>{let n=await X(e,t);return n.success&&window.location.assign(n.data.url),!1}}},et=e=>{let{onActivateRename:t,location:n,onShowMoveToFolderModal:l,isHome:i,hasVideo:s}=e,{reference:o}=Z(),{t:c}=(0,a.$G)("projects"),d=(0,u.n)(),{deleteFile:f,undoDeleteFile:m}=W(o,i),h=(0,G.L)(),{editFile:v}=ee(o),{donwloadFile:x}=z(o);return(0,r.jsxs)(r.Fragment,{children:[!s&&(0,r.jsx)("li",{className:O.iJ,children:(0,r.jsxs)("button",{className:O.UP,onClick:()=>{d({interactionType:"edit",location:n,type:"file"}),v()},"data-cy":"editOnLineAction",children:[(0,r.jsx)(S.J,{as:_.Z})," ",c("actions.edit")]})}),(0,r.jsx)("li",{className:O.iJ,children:(0,r.jsxs)("button",{className:O.UP,onClick:()=>{t(),d({interactionType:"rename",location:n,type:"file"})},"data-cy":"renameAction",children:[(0,r.jsx)(S.J,{as:J.Z})," ",c("actions.rename")]})}),"my_profile"===n&&(0,r.jsx)("li",{className:O.iJ,children:(0,r.jsxs)("button",{className:O.UP,onClick:()=>{l(!0),d({interactionType:"move_to_folder",location:"my_profile",type:"file"})},"data-cy":"moveToFolderAction",children:[(0,r.jsx)(S.J,{as:P.Z})," ",c("moveToFolderModal.title")]})}),(0,r.jsx)("li",{className:O.iJ,children:(0,r.jsxs)("button",{className:O.UP,onClick:()=>{d({interactionType:"download",location:n,type:"file"}),x()},"data-cy":"downloadAction",children:[(0,r.jsx)(S.J,{as:E.Z})," ",c("actions.download")]})}),(0,r.jsx)("span",{"aria-hidden":"true",className:O.jv}),(0,r.jsx)("li",{className:O.iJ,children:(0,r.jsxs)("button",{className:O.UP,onClick:()=>{h({deleteProject:()=>f(),undoDeleteProject:()=>m()}),d({interactionType:"delete",location:n,type:"file"})},"data-cy":"sendToTrashAction",children:[(0,r.jsx)(S.J,{as:A.Z})," ",c("actions.delete")]})})]})};var en=n(75445),er=n(51672),el=n(77065);let ei=()=>{let{reference:e}=Z(),{restoreFile:t}=B(null!=e?e:""),n=(0,er.Y)(),{t:l}=(0,a.$G)("projects"),[i,s]=(0,o.useState)(!1),c=()=>{s(e=>!e)},u=(0,o.useCallback)(async()=>{await t()},[t]),d=(0,o.useCallback)(async()=>{await n({filesReference:e?[e]:[],foldersReference:[]})},[n,e]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:O.iJ,children:(0,r.jsxs)("button",{className:O.UP,onClick:u,"data-cy":"actionRestore",children:[(0,r.jsx)(S.J,{as:en.Z})," ",l("actions.restore")]})}),(0,r.jsx)("li",{className:O.iJ,children:(0,r.jsxs)("button",{className:O.UP,onClick:c,"data-cy":"actionsPurge",children:[(0,r.jsx)(S.J,{as:A.Z})," ",l("actions.purge")]})}),i&&(0,r.jsx)(el.W,{onShowModal:c,showModal:i,onPurge:d})]})};n(84888);var es=n(31468);let ea=e=>{let{children:t,type:n,refMulti:l}=e,{reference:i}=Z(),{setIsBlockedMultiSelect:s,hoverFilesReferenceController:a,selectFilesReferenceController:c,selectedItemsRef:u,multiSelectController:d,selectFilesReference:f}=(0,p.q)(),m=(0,o.useCallback)(()=>{d&&d.deselectAll()},[d]),{openFile:h}=(0,es.C)(i);return"trash"===n?t:(0,r.jsx)("a",{onClick:()=>h(),className:"_1y5m5s10 $cursor-pointer $relative",draggable:"true",onDrag:()=>{c&&(s(!0),!f.has(i)&&(m(),c.replaceItemsReference(new Set([i])),a.replaceItemsReference(new Set([i])),l&&u.current.add(l.current)))},onDragEnd:()=>{s&&setTimeout(()=>{s(!1)},50)},children:t})},eo=e=>"designer"===e?"design":"mockup-editor"===e?"mockup":"aiImage";var ec=n(88146),eu=n(56354);let ed={aiImage:n(65738).Z,mockup:eu.Z,design:ec.Z};n(9021);let ef=e=>{let{origin:t}=e,{t:n}=(0,a.$G)("projects"),l=eo(t),i=ed[l];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.J,{as:i,className:"_5mej6y0"}),n("types.".concat(l))]})};var em=n(43595),eh=n(45466),ev=n(66861);let ex=e=>{let{poster:t,videoSrc:n,duration:l,name:i,height:s}=e,a=(0,o.useRef)(null),c=(0,ev.R)({containerRef:a,threshold:[0,1]});return(0,r.jsx)(em.l,{thumbnailHeight:s,children:(0,r.jsx)("article",{className:"$bg-grayHades $rounded $w-full $h-full $flex $items-center $justify-center $p-10",ref:a,children:(0,r.jsx)(eh.VideoContentComponent,{poster:t,videoSrc:n,duration:l,name:i,isInViewport:c})})})},ey=e=>{var t,n,m,h,v,x,y,g,j,w,b,k,C,S,_,E,P,J,A;let{fileUnity:Z,type:G,popoverOrientation:O="right",refToObserve:Q,isHome:V=!1,itemRef:H}=e,{inputRef:K,isRenaming:L,activateRename:U,renameFile:q}=$(null!==(k=Z.reference)&&void 0!==k?k:"",V),{t:B}=(0,a.$G)("projects"),[W,Y]=(0,o.useState)(!1),z=(0,u.n)(),[X,ee]=(0,o.useState)(!1),[en,er]=(0,o.useState)(null!==(t=Z.thumbnail)&&void 0!==t&&!!t.url),el=!!(null==Z?void 0:null===(n=Z.meta)||void 0===n?void 0:n.url),es=(0,l.a)("mdMax"),eo=(0,p.q)(),ec=!(eo&&0===Object.keys(eo).length),eu=null==eo?void 0:null===(m=eo.hoverFilesReference)||void 0===m?void 0:m.has(Z.reference),ed=null==eo?void 0:null===(h=eo.selectFilesReference)||void 0===h?void 0:h.has(Z.reference),em=!(null==eo?void 0:eo.isSelectMode)&&!(null==eo?void 0:eo.isMultiSelecting),{locale:eh}=(0,i.Vx)(),ev=d(Z.updatedAt,eh),ey=(0,o.useCallback)(()=>{er(!1)},[]);return(0,r.jsxs)(f.Provider,{value:Z,children:[(0,r.jsxs)(R.l,{isHome:V,refToObserve:Q,children:[(0,r.jsxs)(D.a.Wrapper,{isHome:V,isHoverByMulti:eu,reference:Z.reference,itemRef:H,children:[(0,r.jsx)(ea,{type:G,refMulti:H,children:el?(0,r.jsx)(ex,{videoSrc:null!==(C=null===(v=Z.meta)||void 0===v?void 0:v.url)&&void 0!==C?C:"",duration:null===(x=Z.meta)||void 0===x?void 0:x.duration,poster:null!==(S=null===(y=Z.thumbnail)||void 0===y?void 0:y.url)&&void 0!==S?S:"",name:Z.name,height:null!==(_=null===(g=Z.thumbnail)||void 0===g?void 0:g.height)&&void 0!==_?_:250}):en?(0,r.jsx)(D.a.FramedImage,{alt:Z.name,src:null!==(E=null===(j=Z.thumbnail)||void 0===j?void 0:j.url)&&void 0!==E?E:"",width:null!==(P=null===(w=Z.thumbnail)||void 0===w?void 0:w.width)&&void 0!==P?P:250,height:null!==(J=null===(b=Z.thumbnail)||void 0===b?void 0:b.height)&&void 0!==J?J:250,onErrorImage:ey}):(0,r.jsx)(D.a.BrokenImage,{})}),(0,r.jsxs)(I.a,{children:[(0,r.jsx)(F.z,{}),ec&&(0,r.jsx)(M.b,{checked:ed,hide:!(null==eo?void 0:eo.isSelectMode)&&!es,showHover:!(null==eo?void 0:eo.isMultiSelecting),onChange:()=>{if(!ec||!eo)return;let{hoverFilesReferenceController:e,selectFilesReferenceController:t,selectedItemsRef:n}=eo,{deleteItemReference:r,addItemReference:l}=e,{deleteItemReference:i,addItemReference:s}=t;ed&&ec?(i(Z.reference),r(Z.reference),H&&n.current.delete(H.current)):(s(Z.reference),l(Z.reference),H&&n.current.add(H.current))}}),em&&(0,r.jsx)("div",{className:"_1y5m5s11 $absolute $top-5 $right-5 $block $pointer-events-auto",children:(0,r.jsx)(c.K,{popoverOrientation:O,isOpen:X,setIsOpen:ee,children:"all"===G?(0,r.jsx)(et,{hasVideo:el,onActivateRename:()=>U(),location:V?"home":"my_profile",onShowMoveToFolderModal:e=>Y(e),isHome:V}):(0,r.jsx)(ei,{})})}),!(null==eo?void 0:eo.isMultiSelecting)&&!el&&(0,r.jsx)("div",{className:"_1y5m5s12 $absolute $bottom-5 $right-5 $gap-5 $flex $flex-row $items-center $justify-center $rounded $px-10 $py-4 $text-white $font-semibold",children:(0,r.jsx)(ef,{origin:Z.origin})})]})]}),(0,r.jsx)(T.F.Wrapper,{isFilled:!V,children:L?(0,r.jsx)(T.F.EditName,{defaultValue:Z.name,inputRef:K,onBlur:()=>q(),onKeyDown:e=>{"Enter"===e.key&&q()}}):(0,r.jsx)(T.F.Body,{Title:(0,r.jsx)(T.F.Title,{name:Z.name,onClickTitle:()=>{window.matchMedia(s.w5.lg).matches&&(U(),z({interactionType:"title_interaction",location:V?"home":"my_profile",type:"file"}))}}),Description:(0,r.jsx)(T.F.Description,{description:null!==(A=ev.raw)&&void 0!==A?A:B("time.".concat(ev.text),{number:ev.number})})})})]}),W&&(0,r.jsx)("li",{children:(0,r.jsx)(N.P,{name:Z.name,reference:Z.reference,onShowModal:e=>Y(e),showModal:W,type:"file"})})]})}},66861:function(e,t,n){"use strict";n.d(t,{R:function(){return l}});var r=n(52983);let l=e=>{let{containerRef:t,threshold:n=0,disconnect:l=!0,rootMargin:i="0px"}=e,[s,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=t.current;if(!e)return;let r=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting),l&&e.isIntersecting&&r.disconnect()})},{threshold:n,rootMargin:i});return r.observe(e),()=>{e&&r.unobserve(e),l&&r.disconnect()}},[t,l,i,n]),s}},71059:function(e,t,n){"use strict";var r=n(97458);t.Z=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,r.jsx)("path",{d:"M492.9 11.3c-18.4-14.8-43.4-15.1-62.3-.9-40.3 30.6-87.2 74.5-132 123.8-39.8 43.7-74.1 87.3-97.9 124.2-1.2 0-2.3-.1-3.5-.1-36.4 0-67.3 14.7-92 43.7-19.4 22.7-31.5 50.5-40.4 70.7-3.8 8.6-7.3 16.7-10.2 21.5-18.7 31.2-34.6 38-36.2 38.7-9.5 2.6-16.6 10.6-18.1 20.4a25.1 25.1 0 0 0 12.2 25.4C14.9 480 71.4 512 167 512h20c33.4 0 67.5-13.1 93.6-36 28-24.6 43.4-56.8 43.4-90.8 0-8.5-.9-16.9-2.5-25C390.5 277 469 155.4 507.3 71.9c9.8-21.5 4-45.8-14.4-60.6M247.6 438.4c-17.1 15-39.2 23.6-60.6 23.6h-20c-38.3 0-69.2-5.9-91.2-12.1 7-7.9 14.3-17.7 21.7-30 4.5-7.4 8.4-16.5 13.1-27.1 20.3-46.2 40.8-84.5 86.7-84.5 42.4 0 76.8 34.5 76.8 76.8-.1 19.4-9.5 38.3-26.5 53.3m4.8-167.4c9.3-13.5 19.7-27.6 31.1-42 20.3 5 37.7 18.2 48.2 36.3-11.1 15.2-22.1 29.9-33 43.7-12.2-16-28.1-29.1-46.3-38M461.8 51c-22 48-59.2 111.1-99.8 171-12.2-14.4-27.4-26-44.6-33.8C363 135.9 415.9 84.4 460.9 50.3c.2-.1.3-.2.4-.3.3.1.6.4.7.6-.1.1-.1.3-.2.4"})})},9021:function(){},84888:function(){}}]);